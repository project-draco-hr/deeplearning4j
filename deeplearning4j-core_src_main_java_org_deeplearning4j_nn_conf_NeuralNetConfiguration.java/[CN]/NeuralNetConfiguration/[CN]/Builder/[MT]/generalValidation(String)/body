{
  if (useDropConnect && (Double.isNaN(momentum) && (Double.isNaN(layer.getMomentum()))))   throw new IllegalStateException(layerName + " dropConnect is set to true but momentum has not been added to configuration.");
  if (useRegularization && (Double.isNaN(l1) && Double.isNaN(layer.getL1()) && Double.isNaN(l2)&& Double.isNaN(layer.getL2())))   log.warn(layerName + " regularization is set to true but l1 or l2 has not been added to configuration.");
  if (layer != null) {
    if ((!Double.isNaN(l1) || !Double.isNaN(layer.getL1()) || !Double.isNaN(l2)|| !Double.isNaN(layer.getL2())) && !useRegularization)     throw new IllegalStateException(layerName + " l1 or l2 has been added to configuration but useRegularization is set to false.");
    if (layer.getWeightInit() == WeightInit.DISTRIBUTION) {
      if (dist != null && layer.getDist() == null)       layer.setDist(dist);
 else       if (dist == null && layer.getDist() == null) {
        layer.setDist(new NormalDistribution(1e-3,1));
        log.warn(layerName + " distribution is automatically set to mean 1e-3 and variance 1.");
      }
    }
 else     if ((dist != null || layer.getDist() != null))     log.warn(layerName + " distribution is set but will not be applied unless weight init is set to WeighInit.DISTRIBUTION.");
  }
}
