{
  ObjectMapper ret=new ObjectMapper();
  ret.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES,false);
  ret.configure(SerializationFeature.FAIL_ON_EMPTY_BEANS,false);
  ret.enable(SerializationFeature.INDENT_OUTPUT);
  SimpleModule module=new SimpleModule();
  module.addSerializer(LayerFactory.class,new LayerFactorySerializer());
  module.addDeserializer(LayerFactory.class,new LayerFactoryDeSerializer());
  module.addSerializer(IterationListener.class,new IterationSerializer());
  module.addDeserializer(IterationListener.class,new IterationListenerDeSerializer());
  module.addDeserializer(org.nd4j.linalg.api.rng.Random.class,new RandomGeneratorDeSerializer());
  module.addSerializer(org.nd4j.linalg.api.rng.Random.class,new RandomGeneratorSerializer());
  module.addSerializer(Distribution.class,new DistributionSerializer());
  module.addDeserializer(Distribution.class,new DistributionDeSerializer());
  module.addSerializer(StepFunction.class,new StepFunctionSerializer());
  module.addDeserializer(StepFunction.class,new StepFunctionDeSerializer());
  module.addSerializer(OutputPreProcessor.class,new PreProcessorSerializer());
  module.addDeserializer(OutputPreProcessor.class,new PreProcessorDeSerializer());
  ret.registerModule(module);
  return ret;
}
