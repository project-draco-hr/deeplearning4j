{
  LineIterator iter=FileUtils.lineIterator(f);
  Counter<String> wordCounts=new Counter<String>();
  DoubleMatrix ret=new DoubleMatrix(vocab.size());
  while (iter.hasNext()) {
    String line=iter.nextLine();
    StringTokenizer tokenizer=new StringTokenizer(new InputHomogenization(line,true).transform());
    while (tokenizer.hasMoreTokens()) {
      String token=tokenizer.nextToken();
      if (!stopWords.contains(token)) {
        wordCounts.incrementCount(token,1.0);
      }
    }
  }
  for (int i=0; i < vocab.size(); i++) {
    double count=wordCounts.getCount(vocab.get(i).toString());
    ret.put(i,count);
  }
  int nonStopWords=0;
  for (int i=0; i < ret.length; i++) {
    if (ret.get(i) > 0) {
      nonStopWords++;
    }
  }
  for (int i=0; i < ret.length; i++) {
    if (ret.get(i) > 0)     ret.put(i,1);
  }
  double sum=ret.sum();
  return ret;
}
