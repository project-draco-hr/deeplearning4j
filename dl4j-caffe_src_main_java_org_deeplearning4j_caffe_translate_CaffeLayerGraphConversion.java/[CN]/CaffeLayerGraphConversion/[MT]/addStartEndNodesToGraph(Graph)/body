{
  Map<CaffeNode,Set<CaffeNode>> adjacencyMap=graph.getAdjacencyListMap();
  for (  CaffeNode node : adjacencyMap.keySet()) {
    if (node.getBottomNodeSet() == null || node.getBottomNodeSet().size() == 0) {
      graph.addStartNode(node);
    }
    if (adjacencyMap.get(node).size() == 0) {
      graph.addEndNode(node);
    }
  }
  trimStartEndNodes(graph);
}
