{
  Set<CaffeNode> startNodeSet=graph.getStartNodeSet();
  Set<CaffeNode> endNodeSet=graph.getEndNodeSet();
  ArrayList<CaffeNode> nodesToRemoveFromGraph=new ArrayList<>();
  for (  CaffeNode startNode : startNodeSet) {
    if (startNode.getLayerSubType().equals(LayerSubType.CONNECTOR)) {
      graph.removeNodeFromStartNodes(startNode);
      nodesToRemoveFromGraph.add(startNode);
      List<CaffeNode> topList=forwardTrack(startNode,graph);
      for (      CaffeNode topNode : topList) {
        graph.addStartNode(topNode);
      }
    }
  }
  for (  CaffeNode endNode : endNodeSet) {
    if (endNode.getLayerSubType().equals(LayerSubType.CONNECTOR)) {
      nodesToRemoveFromGraph.add(endNode);
      graph.removeNodeFromEndNodes(endNode);
      List<CaffeNode> bottomList=backwardTrack(endNode);
      for (      CaffeNode bottomNode : bottomList) {
        graph.addEndNode(bottomNode);
        graph.removeNodeFromStartNodes(bottomNode);
      }
    }
  }
  graph.removeNodesFromGraph(nodesToRemoveFromGraph);
}
