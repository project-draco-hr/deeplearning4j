{
  if (useCurrent) {
    useCurrent=false;
    return last;
  }
  DataSet result;
  int i=1;
  if (preProcessCifar) {
    if (train && batchNum == 0 && i <= CifarLoader.TRAINFILENAMES.length)     i++;
    result=loader.next(batchSize,i,batchNum);
  }
 else   result=loader.next(batchSize);
  exampleCount+=batchSize;
  batchNum++;
  if (result == null || (maxNumBatches > -1 && batchNum >= maxNumBatches)) {
    overshot=true;
    return last;
  }
  if (preProcessor != null)   preProcessor.preProcess(result);
  last=result;
  if (loader.getLabels() != null)   result.setLabelNames(loader.getLabels());
  return result;
}
