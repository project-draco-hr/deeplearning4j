{
  if (gradient.gradient().length() != numParams(true))   throw new IllegalArgumentException("Invalid input: expect gradients array of length " + numParams(true));
  for (  Map.Entry<String,INDArray> entry : gradient.gradientForVariable().entrySet()) {
    String key=entry.getKey();
    INDArray val=entry.getValue();
    int layerId=Integer.valueOf(key.split("_")[0]);
    String paramType=key.split("_")[1];
    this.gradient.setGradientFor(key,val);
    layers[layerId].update(val,paramType);
  }
  setBackpropGradientsViewArray(gradient.gradient());
}
