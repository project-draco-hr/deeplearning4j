{
  File rootDir=new ClassPathResource("rootdir").getFile();
  LabelAwareSentenceIterator iter=new LabelAwareFileSentenceIterator(rootDir);
  List<String> labels=Arrays.asList("label1","label2");
  TokenizerFactory tokenizerFactory=new DefaultTokenizerFactory();
  TextVectorizer vectorizer=new LegacyBagOfWordsVectorizer.Builder().index(index).cache(cache).minWords(1).stopWords(new ArrayList<String>()).cleanup(true).tokenize(tokenizerFactory).iterate(iter).labels(labels).build();
  vectorizer.fit();
  VocabWord word=(VocabWord)vectorizer.vocab().wordFor("file.");
  assumeNotNull(word);
  assertEquals(word,vectorizer.vocab().tokenFor("file."));
  assertEquals(2,vectorizer.index().numDocuments());
}
