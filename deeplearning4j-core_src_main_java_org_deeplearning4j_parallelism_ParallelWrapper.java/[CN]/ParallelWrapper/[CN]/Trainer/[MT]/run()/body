{
  try {
    while (true) {
      DataSet dataSet=queue.poll(3,TimeUnit.SECONDS);
      if (dataSet != null) {
        running.set(true);
        if (replicatedModel instanceof MultiLayerNetwork) {
          ((MultiLayerNetwork)replicatedModel).fit(dataSet);
        }
 else         if (replicatedModel instanceof ComputationGraph) {
          ((ComputationGraph)replicatedModel).fit(dataSet);
        }
        running.set(false);
      }
    }
  }
 catch (  Exception e) {
  }
  logger.info("Finished training thread...");
}
