{
  DataSetIterator iter=new MnistDataSetIterator(100,60000);
  DBN dbn=SerializationUtils.readObject(new File(args[0]));
  DeepAutoEncoder encoder=new DeepAutoEncoder(dbn);
  while (iter.hasNext()) {
    DataSet next=iter.next();
    if (next == null)     break;
    log.info("Training on " + next.numExamples());
    encoder.finetune(next.getFirst(),1e-1,1000);
    DeepAutoEncoderDataSetReconstructionRender render=new DeepAutoEncoderDataSetReconstructionRender(iter,encoder);
    render.draw();
  }
  SerializationUtils.saveObject(encoder,new File("deepautoencoder.ser"));
  iter.reset();
  DeepAutoEncoderDataSetReconstructionRender render=new DeepAutoEncoderDataSetReconstructionRender(iter,encoder);
  render.draw();
}
