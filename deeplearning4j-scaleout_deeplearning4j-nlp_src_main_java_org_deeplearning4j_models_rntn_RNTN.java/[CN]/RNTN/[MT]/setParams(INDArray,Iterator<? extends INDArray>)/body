{
  int index=0;
  for (  Iterator<? extends INDArray> matrixIterator : matrices) {
    while (matrixIterator.hasNext()) {
      INDArray matrix=matrixIterator.next();
      for (int i=0; i < matrix.length(); ++i) {
        matrix.put(i,theta.getScalar(index));
        ++index;
      }
    }
  }
  if (index != theta.length()) {
    throw new AssertionError("Did not entirely use the theta vector");
  }
}
