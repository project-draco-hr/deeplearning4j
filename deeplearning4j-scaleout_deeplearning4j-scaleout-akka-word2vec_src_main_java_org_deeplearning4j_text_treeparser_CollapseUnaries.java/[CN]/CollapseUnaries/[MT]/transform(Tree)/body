{
  if (tree.isPreTerminal() || tree.isLeaf()) {
    return tree.clone();
  }
  String label=tree.label();
  List<Tree> children=tree.children();
  while (children.size() == 1 && !children.get(0).isLeaf()) {
    children=children.get(0).children();
  }
  List<Tree> processedChildren=new ArrayList<>();
  for (  Tree child : children) {
    processedChildren.add(transform(child));
  }
  Tree ret=new Tree(tree.getTokens());
  ret.connect(processedChildren);
  ret.setLabel(label);
  return ret;
}
