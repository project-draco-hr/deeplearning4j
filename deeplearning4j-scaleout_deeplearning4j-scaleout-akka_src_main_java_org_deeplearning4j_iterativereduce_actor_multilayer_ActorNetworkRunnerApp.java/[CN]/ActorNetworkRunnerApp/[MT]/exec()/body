{
  if (type != null && type.equals("worker")) {
    log.info("Initializing conf from zookeeper at " + host);
    ZookeeperConfigurationRetriever retriever=new ZookeeperConfigurationRetriever(host,2181,"master");
    Conf conf=retriever.retreive();
    String address=conf.getMasterUrl();
    HazelCastStateTracker stateTracker=new HazelCastStateTracker(conf.getStateTrackerConnectionString());
    log.info("Creating hazel cast via worker " + stateTracker.connectionString());
    runner=new ActorNetworkRunner(type,address);
    runner.setStateTracker(stateTracker);
    runner.setup(conf);
    retriever.close();
  }
 else {
    Conf conf=new Conf();
    getDataSet();
    conf.setMultiLayerClazz((Class<? extends BaseMultiLayerNetwork>)Class.forName(getClassForAlgorithm()));
    conf.setLayerSizes(hiddenLayerSizes);
    conf.setSplit(10);
    conf.setnIn(iter.inputColumns());
    conf.setnOut(iter.totalOutcomes());
    conf.setPretrainEpochs(pretrainEpochs);
    conf.setFinetuneEpochs(finetuneEpochs);
    conf.setSeed(rngSeed);
    conf.setPretrainLearningRate(pretrainLearningRate);
    conf.setUseAdaGrad(useAdaGrad);
    conf.setCorruptionLevel(corruptionLevel);
    conf.setSplit(split);
    conf.setK(k);
    conf.setFinetuneLearningRate(finetuneLearningRate);
    conf.setPretrainEpochs(pretrainEpochs);
    conf.setPretrainLearningRate(pretrainLearningRate);
    runner=new ActorNetworkRunner("master",iter);
    runner.setStateTrackerPort(stateTrackerPort);
    runner.setup(conf);
  }
}
