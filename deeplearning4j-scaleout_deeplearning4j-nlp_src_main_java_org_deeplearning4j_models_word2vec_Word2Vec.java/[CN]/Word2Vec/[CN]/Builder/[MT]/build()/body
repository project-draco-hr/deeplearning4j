{
  if (iter == null) {
    Word2Vec ret=new Word2Vec();
    ret.layerSize=layerSize;
    ret.window=window;
    ret.stopWords=StopWords.getStopWords();
    ret.setCache(vocabCache);
    ret.minWordFrequency=minWordFrequency;
    try {
      if (tokenizerFactory == null)       tokenizerFactory=new UimaTokenizerFactory();
    }
 catch (    Exception e) {
      throw new RuntimeException(e);
    }
    ret.tokenizerFactory=tokenizerFactory;
    vocabCache.putVector(UNK,Nd4j.randn(new int[]{layerSize}));
    vocabCache.addWordToIndex(0,UNK);
    vocabCache.putVocabWord(UNK,new VocabWord(1,UNK));
    return ret;
  }
 else {
    Word2Vec ret=new Word2Vec(iter);
    ret.layerSize=layerSize;
    ret.window=window;
    ret.stopWords=stopWords;
    ret.minWordFrequency=minWordFrequency;
    ret.setCache(vocabCache);
    ret.minWordFrequency=minWordFrequency;
    try {
      if (tokenizerFactory == null)       tokenizerFactory=new UimaTokenizerFactory();
    }
 catch (    Exception e) {
      throw new RuntimeException(e);
    }
    vocabCache.putVector(UNK,Nd4j.randn(new int[]{layerSize}));
    vocabCache.putVector(UNK,Nd4j.randn(new int[]{layerSize}));
    vocabCache.addWordToIndex(0,UNK);
    vocabCache.putVocabWord(UNK,new VocabWord(1,UNK));
    ret.tokenizerFactory=tokenizerFactory;
    return ret;
  }
}
