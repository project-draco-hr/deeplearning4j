{
  isRunning.set(true);
  while (this.iterator.hasNext()) {
    if (buffer.size() < limitLower) {
      AtomicInteger linesLoaded=new AtomicInteger(0);
      while (linesLoaded.getAndIncrement() < limitUpper && this.iterator.hasNext()) {
        String sentence=this.iterator.nextSentence();
        Tokenizer tokenizer=Word2Vec.this.tokenizerFactory.create(sentence);
        List<String> tokens=tokenizer.getTokens();
        List<VocabWord> list=Word2Vec.this.digitizeSentence(tokens,nextRandom);
        if (list != null && !list.isEmpty()) {
          buffer.add(list);
        }
        linesLoaded.incrementAndGet();
      }
    }
 else {
      try {
        Thread.sleep(50);
      }
 catch (      Exception e) {
        e.printStackTrace();
      }
    }
  }
  isRunning.set(false);
}
