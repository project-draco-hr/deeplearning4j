{
  BufferedImage image=ImageIO.read(file);
  if (height > 0 && width > 0)   image=toBufferedImage(image.getScaledInstance(height,width,Image.SCALE_SMOOTH));
  Raster raster=image.getData();
  int w=raster.getWidth(), h=raster.getHeight();
  int[][] ret=new int[w][h];
  for (int i=0; i < w; i++)   for (int j=0; j < h; j++)   ret[i][j]=raster.getSample(i,j,0);
  return ret;
}
