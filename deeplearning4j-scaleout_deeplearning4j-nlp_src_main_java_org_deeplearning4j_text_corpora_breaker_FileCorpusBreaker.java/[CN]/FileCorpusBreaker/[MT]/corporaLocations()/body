{
  File dir=new File(UUID.randomUUID().toString());
  dir.mkdir();
  long fileSize=original.getTotalSpace();
  URI[] ret;
  InputStream fis=new BufferedInputStream(new FileInputStream(original));
  String newName;
  FileOutputStream chunk;
  long nChunks=0, read=0, readLength=this.segmentBy;
  List<URI> uris=new ArrayList<>();
  byte[] byteChunk;
  try {
    while (fileSize > 0) {
      byteChunk=new byte[(int)readLength];
      read=fis.read(byteChunk,0,(int)readLength);
      fileSize-=read;
      assert(read == byteChunk.length);
      nChunks++;
      newName=String.valueOf(nChunks);
      File curr=new File(dir,newName);
      chunk=new FileOutputStream(curr);
      chunk.write(byteChunk);
      chunk.flush();
      chunk.close();
      byteChunk=null;
      chunk=null;
      uris.add(curr.toURI());
    }
    fis.close();
    fis=null;
    ret=uris.toArray(new URI[1]);
    locations=ret;
    return ret;
  }
 catch (  Exception e) {
    throw new RuntimeException(e);
  }
}
