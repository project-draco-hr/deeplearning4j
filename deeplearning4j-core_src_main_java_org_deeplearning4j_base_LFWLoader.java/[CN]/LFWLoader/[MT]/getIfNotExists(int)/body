{
  if (!lfwDir.exists()) {
    lfwDir.mkdir();
    LOG.info("Grabbing LFW...");
    URL website=new URL(LFW_URL);
    ReadableByteChannel rbc=Channels.newChannel(website.openStream());
    if (!lfwTarFile.exists())     lfwTarFile.createNewFile();
    FileOutputStream fos=new FileOutputStream(lfwTarFile);
    fos.getChannel().transferFrom(rbc,0,Long.MAX_VALUE);
    fos.flush();
    IOUtils.closeQuietly(fos);
    rbc.close();
    LOG.info("Downloaded lfw");
    untarFile(baseDir,lfwTarFile);
  }
  File firstImage=null;
  try {
    firstImage=lfwDir.listFiles()[0].listFiles()[0];
  }
 catch (  Exception e) {
    LOG.warn("Exception while fetching LFW dataset; attempt no. " + numAttempts,e);
    if (numAttempts > 0) {
      FileUtils.deleteDirectory(lfwDir);
      LOG.info("Trying again");
      getIfNotExists(--numAttempts);
    }
 else {
      throw e;
    }
  }
  numPixelColumns=ArrayUtil.flatten(loader.fromFile(firstImage)).length;
  numNames=lfwDir.getAbsoluteFile().listFiles().length;
  @SuppressWarnings("unchecked") Collection<File> allImages=FileUtils.listFiles(lfwDir,org.apache.commons.io.filefilter.FileFileFilter.FILE,org.apache.commons.io.filefilter.DirectoryFileFilter.DIRECTORY);
  for (  File f : allImages) {
    images.add(f.getAbsolutePath());
  }
  for (  File dir : lfwDir.getAbsoluteFile().listFiles()) {
    outcomes.add(dir.getAbsolutePath());
  }
}
