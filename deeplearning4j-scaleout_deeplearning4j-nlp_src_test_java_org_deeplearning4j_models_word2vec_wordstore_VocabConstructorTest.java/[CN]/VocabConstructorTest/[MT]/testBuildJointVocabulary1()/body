{
  File inputFile=new ClassPathResource("/big/raw_sentences.txt").getFile();
  SentenceIterator iter=UimaSentenceIterator.createWithPath(inputFile.getAbsolutePath());
  TokenizerFactory t=new DefaultTokenizerFactory();
  t.setTokenPreProcessor(new CommonPreprocessor());
  VocabCache<VocabWord> cache=new AbstractCache.Builder<VocabWord>().build();
  SentenceTransformer transformer=new SentenceTransformer.Builder(cache).iterator(iter).tokenizerFactory(t).build();
  AbstractSequenceIterator<VocabWord> sequenceIterator=new AbstractSequenceIterator.Builder<VocabWord>(transformer).build();
  VocabConstructor<VocabWord> constructor=new VocabConstructor.Builder<VocabWord>().addSource(sequenceIterator,0).useAdaGrad(false).build();
  constructor.buildJointVocabulary(true,false);
  assertEquals(0,cache.totalWordOccurrences());
  assertEquals(244,cache.numWords());
}
