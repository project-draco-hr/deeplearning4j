{
  List<String> gradientList=conf.getGradientList();
  int length=0;
  for (  String s : gradientList)   length+=getParam(s).length();
  if (params.length() != length)   throw new IllegalArgumentException("Unable to set parameters: must be of length " + length);
  int idx=0;
  for (int i=0; i < gradientList.size(); i++) {
    INDArray param=getParam(gradientList.get(i));
    INDArray get=params.get(NDArrayIndex.interval(idx,idx + param.length()));
    if (param.length() != get.length())     throw new IllegalStateException("Parameter " + gradientList.get(i) + " should have been of length "+ param.length()+ " but was "+ get.length());
    param.assign(get.reshape(param.shape()));
    idx+=param.length();
  }
}
