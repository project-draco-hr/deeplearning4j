{
  Job j;
  if ((j=tracker.jobFor(id)) == null) {
    if (!isWorking.get() && j != null) {
      tracker.clearJob(id);
      log.info("Clearing stale job " + id);
    }
    return;
  }
  if (tracker.needsReplicate(id)) {
    try {
      log.info("Updating worker " + id);
      setCurrentJob((Job)tracker.getCurrent());
      tracker.doneReplicating(id);
    }
 catch (    Exception e) {
      throw new RuntimeException(e);
    }
  }
  if (j != null && getCurrentJob() == null) {
    log.info("Assigning job for worker " + id);
    setCurrentJob(j);
  }
}
