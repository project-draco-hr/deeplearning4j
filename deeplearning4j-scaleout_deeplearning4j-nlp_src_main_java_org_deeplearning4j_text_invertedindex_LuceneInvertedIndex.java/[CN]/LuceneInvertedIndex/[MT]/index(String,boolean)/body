{
  File dir2=new File(indexPath);
  if (!dir2.exists())   dir2.mkdir();
  analyzer=new StandardAnalyzer(new InputStreamReader(new ByteArrayInputStream("".getBytes())));
  if (create) {
    iwc.setOpenMode(IndexWriterConfig.OpenMode.CREATE);
  }
 else {
    iwc.setOpenMode(IndexWriterConfig.OpenMode.CREATE_OR_APPEND);
  }
  iwc.setRAMBufferSizeMB(5000);
  dir=FSDirectory.open(dir2);
  if (!indexBeingCreated.get()) {
    indexBeingCreated.set(true);
    writer=new IndexWriter(dir,iwc);
  }
  while (writer == null) {
    try {
      Thread.sleep(10000);
      log.info("Waiting on index creation...");
    }
 catch (    InterruptedException e) {
      Thread.currentThread().interrupt();
    }
  }
  initReader();
}
