{
  for (int i=0; i < matrix.length; i++) {
    double val=matrix.get(i);
    if (val < -1)     val=-1;
 else     if (val > 1)     val=1;
 else     val=Math.tanh(val);
    matrix.put(i,(float)val);
  }
  return matrix;
}
