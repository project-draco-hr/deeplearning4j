{
  BufferedWriter write=new BufferedWriter(new FileWriter(csv));
  int words=0;
  InMemoryLookupCache l=(InMemoryLookupCache)vec.getCache();
  for (  String word : vec.getCache().words()) {
    if (word == null)     continue;
    StringBuffer sb=new StringBuffer();
    INDArray wordVector=tsne.getRow(l.wordFor(word).getIndex());
    for (int j=0; j < wordVector.length(); j++) {
      sb.append(wordVector.getDouble(j));
      if (j < wordVector.length() - 1)       sb.append(",");
    }
    sb.append(",");
    sb.append(word);
    sb.append(" ");
    sb.append("\n");
    write.write(sb.toString());
  }
  System.out.println("Wrote " + words + " with size of "+ vec.getLayerSize());
  write.flush();
  write.close();
}
