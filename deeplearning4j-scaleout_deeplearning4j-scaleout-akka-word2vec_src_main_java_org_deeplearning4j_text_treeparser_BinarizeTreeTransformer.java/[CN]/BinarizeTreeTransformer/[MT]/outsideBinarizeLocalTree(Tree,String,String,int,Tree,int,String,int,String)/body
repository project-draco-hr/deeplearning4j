{
  List<Tree> newChildren=new ArrayList<>(2);
  String word=head.value();
  String tag=head.tags().get(0);
  String label=labelStr + "/" + word+ "/tag";
  if (t.children().size() - leftProcessed - rightProcessed <= 2) {
    newChildren.add(t.children().get(leftProcessed));
    if (t.children().size() - leftProcessed - rightProcessed == 2) {
      newChildren.add(t.children().get(leftProcessed + 1));
    }
    Tree ret=new Tree(t);
    ret.setChildren(newChildren);
    ret.setLabel(label);
    return ret;
  }
  if (headNum > leftProcessed) {
    Tree leftChild=t.children().get(leftProcessed);
    String childLeftStr=leftStr + " " + leftChild.label();
    String childLabelStr;
    if (simpleLabels) {
      childLabelStr="@" + finalCat;
    }
 else {
      childLabelStr="@" + finalCat + " :"+ childLeftStr+ " ..."+ rightStr;
    }
    Tree rightChild=outsideBinarizeLocalTree(t,childLabelStr,finalCat,headNum,head,leftProcessed + 1,childLeftStr,rightProcessed,rightStr);
    newChildren.add(leftChild);
    newChildren.add(rightChild);
    Tree ret=new Tree(t);
    ret.setChildren(newChildren);
    ret.setLabel(label);
    return ret;
  }
 else {
    Tree rightChild=t.children().get(t.children().size() - rightProcessed - 1);
    String childRightStr=" " + rightChild.label() + rightStr;
    String childLabelStr;
    if (simpleLabels) {
      childLabelStr="@" + finalCat;
    }
 else {
      childLabelStr="@" + finalCat + " :"+ leftStr+ " ..."+ childRightStr;
    }
    Tree leftChild=outsideBinarizeLocalTree(t,childLabelStr,finalCat,headNum,head,leftProcessed,leftStr,rightProcessed + 1,childRightStr);
    newChildren.add(leftChild);
    newChildren.add(rightChild);
    Tree ret=new Tree(t);
    ret.setChildren(newChildren);
    ret.setLabel(labelStr);
    return ret;
  }
}
