{
  if (codeLengthSoFar >= 64)   throw new RuntimeException("Cannot generate code: code length exceeds 64 bits");
  if (node.left == null && node.right == null) {
    codes[node.vertexIdx]=codeSoFar;
    codeLength[node.vertexIdx]=codeLengthSoFar;
    return;
  }
  byte b=1;
  long codeLeft=setBit(codeSoFar,codeLengthSoFar + 1,false);
  traverse(node.left,codeLeft,(byte)(codeLengthSoFar + 1));
  long codeRight=setBit(codeSoFar,codeLengthSoFar + 1,true);
  traverse(node.right,codeRight,(byte)(codeLengthSoFar + 1));
}
