{
  isRunning.set(true);
  while (this.backendIterator.hasNextDocument()) {
    if (buffer.size() < 1000) {
      int cnt=0;
      while (cnt < 1000 && this.backendIterator.hasNextDocument()) {
        LabelledDocument document=this.backendIterator.nextDocument();
        Tokenizer tokenizer=tokenizerFactory.create(document.getContent());
        List<String> tokens=tokenizer.getTokens();
        List<VocabWord> words=ParagraphVectors.this.digitizeSentence(tokens);
        document.setReferencedContent(words);
        document.setContent(null);
        buffer.add(document);
        cnt++;
      }
    }
 else     try {
      Thread.sleep(10);
    }
 catch (    Exception e) {
      throw new RuntimeException(e);
    }
  }
  isRunning.set(false);
  log.info("AsyncIterator finished");
}
