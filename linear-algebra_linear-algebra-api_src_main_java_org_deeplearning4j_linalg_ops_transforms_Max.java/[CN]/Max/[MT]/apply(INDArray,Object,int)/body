{
  if (value instanceof IComplexNumber) {
    IComplexNumber num=(IComplexNumber)value;
    if (num.realComponent().doubleValue() > max)     return num;
    return num.set(max,num.imaginaryComponent());
  }
  float val=(float)value;
  return (float)Math.max(max,val);
}
