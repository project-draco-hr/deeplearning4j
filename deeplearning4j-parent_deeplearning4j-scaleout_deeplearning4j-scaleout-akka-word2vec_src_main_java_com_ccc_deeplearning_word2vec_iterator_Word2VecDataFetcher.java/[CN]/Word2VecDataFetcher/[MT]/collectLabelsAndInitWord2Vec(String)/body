{
  files=FileUtils.iterateFiles(new File(path),null,true);
  vec=new Word2Vec(FileUtils.iterateFiles(new File(path),null,true));
  vec.setMinWordFrequency(minWordFrequency);
  Set<String> labels=new HashSet<String>();
  int linesCount=0;
  while (files.hasNext()) {
    File next=files.next();
    try {
      LineIterator lines=FileUtils.lineIterator(next);
      if (!lines.hasNext())       continue;
      for (String line=lines.nextLine(); lines.hasNext(); line=lines.nextLine()) {
        List<Window> windows=Windows.windows(line);
        totalExamples+=windows.size();
        linesCount++;
        vec.addToVocab(line);
        Matcher beginMatcher=begin.matcher(line);
        Matcher endMatcher=end.matcher(line);
        while (beginMatcher.find() && endMatcher.find()) {
          String beginGroup=beginMatcher.group();
          String endGroup=endMatcher.group();
          beginGroup=beginGroup.replace("<","").replace(">","");
          endGroup=endGroup.replace("<","").replace(">","");
          if (beginGroup.equals(endGroup)) {
            labels.add(beginGroup);
          }
        }
      }
    }
 catch (    IOException e) {
      throw new RuntimeException(e);
    }
  }
  log.info("Processed " + linesCount + " lines for training");
  vec.setup();
  files=FileUtils.iterateFiles(new File(path),null,true);
  vec.train();
  files=FileUtils.iterateFiles(new File(path),null,true);
  this.labels.addAll(labels);
}
