{
  Map<Integer,Integer> mapHistory=new TreeMap<Integer,Integer>();
  double min=data.min();
  double max=data.max();
  double range=max - min;
  double stepSize=range / numberBins;
  for (int row=0; row < data.rows; row++) {
    for (int col=0; col < data.columns; col++) {
      double matrix_value=data.get(row,col);
      int bucket_key=this.computeHistogramBucketIndex(min,stepSize,matrix_value,numberBins);
      int entry=0;
      if (mapHistory.containsKey(bucket_key)) {
        entry=mapHistory.get(bucket_key);
        entry++;
        mapHistory.put(bucket_key,entry);
      }
 else {
        String bucket_label=buildBucketLabel(bucket_key,stepSize,min);
        entry=1;
        mapHistory.put(bucket_key,entry);
      }
    }
  }
  return mapHistory;
}
