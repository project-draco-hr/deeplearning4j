{
  Map<Integer,Integer> mapHistory=new TreeMap<>();
  float min=(float)data.min(Integer.MAX_VALUE).element();
  float max=(float)data.max(Integer.MAX_VALUE).element();
  float range=max - min;
  float stepSize=range / numberBins;
  for (int row=0; row < data.rows(); row++) {
    for (int col=0; col < data.columns(); col++) {
      float matrix_value=(float)data.getScalar(row,col).element();
      int bucket_key=this.computeHistogramBucketIndex(min,stepSize,matrix_value,numberBins);
      int entry=0;
      if (mapHistory.containsKey(bucket_key)) {
        entry=mapHistory.get(bucket_key);
        entry++;
        mapHistory.put(bucket_key,entry);
      }
 else {
        String bucket_label=buildBucketLabel(bucket_key,stepSize,min);
        entry=1;
        mapHistory.put(bucket_key,entry);
      }
    }
  }
  return mapHistory;
}
