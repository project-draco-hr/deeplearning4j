{
  if (iteration % iterations == 0) {
    Map<String,INDArray> grad=model.gradient().gradientForVariable();
    Map<String,INDArray> newGrad=new LinkedHashMap<>();
    for (    Map.Entry<String,INDArray> entry : grad.entrySet()) {
      newGrad.put("param_" + entry.getKey(),entry.getValue().dup());
    }
    Map<String,INDArray> params=model.paramTable();
    Map<String,INDArray> newParams=new LinkedHashMap<>();
    for (    Map.Entry<String,INDArray> entry : params.entrySet()) {
      newParams.put("param_" + entry.getKey(),entry.getValue().dup());
    }
    ModelAndGradient g=new ModelAndGradient();
    g.setGradients(newGrad);
    g.setParameters(newParams);
    g.setScore(model.score());
    Response resp=target.request(MediaType.APPLICATION_JSON).accept(MediaType.APPLICATION_JSON).post(Entity.entity(g,MediaType.APPLICATION_JSON));
    System.out.println(resp);
  }
}
