{
  List<String> labels=new ArrayList<>(Arrays.asList("Zico","Ziwang_Xu"));
  String rootDir=new ClassPathResource("lfwtest").getTempFileFromArchive().getAbsolutePath();
  RecordReader reader=new ImageRecordReader(28,28,3,true,labels);
  reader.initialize(new FileSplit(new File(rootDir)));
  DataSetIterator recordReader=new RecordReaderDataSetIterator(reader,1,labels.size());
  labels.remove("lfwtest");
  NeuralNetConfiguration.ListBuilder builder=(NeuralNetConfiguration.ListBuilder)incompleteLFW();
  new ConvolutionLayerSetup(builder,28,28,3);
  ConvolutionLayer layer2=(ConvolutionLayer)builder.getLayerwise().get(2).getLayer();
  assertEquals(6,layer2.getNIn());
  DataSet next=recordReader.next();
  MultiLayerConfiguration conf=builder.build();
  MultiLayerNetwork network=new MultiLayerNetwork(conf);
  network.init();
  network.fit(next);
}
