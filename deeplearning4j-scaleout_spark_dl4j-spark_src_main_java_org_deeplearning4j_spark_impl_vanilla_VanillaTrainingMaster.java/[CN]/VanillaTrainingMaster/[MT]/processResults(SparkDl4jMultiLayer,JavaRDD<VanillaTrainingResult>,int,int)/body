{
  if (collectTrainingStats)   stats.logAggregateStartTime();
  VanillaAggregationTuple tuple=results.aggregate(null,new VanillaElementAddFunction(),new VanillaElementCombineFunction());
  INDArray params=tuple.getParametersSum();
  int aggCount=tuple.getAggregationsCount();
  UpdaterAggregator updaterAg=tuple.getUpdaterAggregator();
  SparkTrainingStats aggregatedStats=tuple.getSparkTrainingStats();
  if (collectTrainingStats)   stats.logAggregationEndTime();
  MultiLayerNetwork net=network.getNetwork();
  if (collectTrainingStats)   stats.logProcessParamsUpdaterStart();
  params.divi(aggCount);
  Updater updater=updaterAg.getUpdater();
  net.setParameters(params);
  net.setUpdater(updater);
  if (collectTrainingStats) {
    stats.logProcessParamsUpdaterEnd();
    stats.addWorkerStats(aggregatedStats);
  }
  log.info("Completed training of split {} of {}",splitNum,totalSplits);
  network.setScore(tuple.getScoreSum() / tuple.getAggregationsCount());
}
