{
  double realMin=1.1755e-38;
  double cutOff=FastMath.log(realMin);
  if (value instanceof IComplexNumber) {
    IComplexNumber c=(IComplexNumber)value;
    float curr=c.realComponent().floatValue();
    if (curr * k > -cutOff)     return NDArrays.createDouble(-cutOff / k,c.imaginaryComponent().floatValue());
 else     if (curr * k < cutOff)     return NDArrays.createDouble(cutOff / k,c.imaginaryComponent().floatValue());
  }
 else {
    float curr=(float)value;
    if (curr * k > -cutOff)     return -cutOff / k;
 else     if (curr * k < cutOff)     return cutOff / k;
  }
  return value;
}
