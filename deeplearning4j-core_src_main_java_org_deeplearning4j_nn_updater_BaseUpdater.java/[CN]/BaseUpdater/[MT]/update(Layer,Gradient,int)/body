{
  Map<String,INDArray> newGradients=new HashMap<>();
  for (  Map.Entry<String,INDArray> gradientPair : gradient.gradientForVariable().entrySet()) {
    GradientUpdater updater=init(gradientPair.getKey(),gradientPair.getValue(),layer);
    INDArray gradient2=updater.getGradient(gradientPair.getValue(),iteration);
    postApply(layer,gradient2,gradientPair.getKey());
    newGradients.put(gradientPair.getKey(),gradient2);
  }
  for (  Map.Entry<String,INDArray> gradientPair : newGradients.entrySet()) {
    gradient.setGradientFor(gradientPair.getKey(),gradientPair.getValue());
  }
}
