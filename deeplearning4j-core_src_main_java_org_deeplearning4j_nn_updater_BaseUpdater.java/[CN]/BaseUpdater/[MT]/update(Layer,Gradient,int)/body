{
  String paramName;
  INDArray paramVal, gradient2;
  GradientUpdater updater;
  preApply(layer,gradient,iteration);
  for (  Map.Entry<String,INDArray> gradientPair : gradient.gradientForVariable().entrySet()) {
    paramName=gradientPair.getKey();
    paramVal=gradientPair.getValue();
    if (layer.conf().isUseSchedules())     checkSchedules(layer,iteration,paramName);
    updater=init(paramName,paramVal,layer);
    gradient2=updater.getGradient(paramVal,iteration);
    postApply(layer,gradient2,paramName);
    gradient.setGradientFor(paramName,gradient2);
  }
}
