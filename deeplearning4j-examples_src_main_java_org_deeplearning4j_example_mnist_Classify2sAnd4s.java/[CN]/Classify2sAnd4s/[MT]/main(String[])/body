{
  File f=new File("twoandfours.bin");
  if (!f.exists())   Create2sAnd4sDataSet.main(null);
  DataSet twosAndFours=DataSet.load(f);
  DataSetIterator iter=new ListDataSetIterator(twosAndFours.asList());
  CDBN dbn=null;
  List<MultiLayerGradientListener> listeners=new ArrayList<>();
  WeightPlotListener listener=new WeightPlotListener();
  Conf c=new Conf();
  c.initFromData(twosAndFours);
  c.setFinetuneEpochs(2000);
  c.setFinetuneLearningRate(0.1);
  c.setLayerSizes(new int[]{500,400,250});
  c.setUseAdaGrad(true);
  c.setSplit(10);
  c.setMultiLayerClazz(CDBN.class);
  c.setUseRegularization(false);
  c.setDeepLearningParams(new Object[]{1,0.1,2000});
  c.setMultiLayerGradientListeners(listeners);
  if (args.length >= 1) {
    dbn=SerializationUtils.readObject(new File(args[0]));
  }
  ActorNetworkRunner runner=dbn == null ? new ActorNetworkRunner("master",iter) : new ActorNetworkRunner("master",iter,dbn);
  runner.finetune();
  runner.setup(c);
  runner.train();
}
