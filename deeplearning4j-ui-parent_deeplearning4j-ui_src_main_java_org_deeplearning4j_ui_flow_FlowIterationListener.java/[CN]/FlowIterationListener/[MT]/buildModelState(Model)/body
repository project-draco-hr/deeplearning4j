{
  long timeSpent=currTime - lastTime;
  float timeSec=timeSpent / 1000f;
  INDArray input=model.input();
  long tadLength=Shape.getTADLength(input.shape(),ArrayUtil.range(1,input.rank()));
  long numSamples=input.lengthLong() / tadLength;
  modelState.addPerformanceSamples(numSamples / timeSec);
  modelState.addPerformanceBatches(1 / timeSec);
  modelState.setIterationTime(timeSpent);
  modelState.addScore((float)model.score());
}
