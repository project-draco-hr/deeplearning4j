{
  if (optimizer != null)   return optimizer;
switch (conf.getOptimizationAlgo()) {
case LBFGS:
    return new LBFGS(conf,stepFunction,listeners,model);
case LINE_GRADIENT_DESCENT:
  return new LineGradientDescent(conf,stepFunction,listeners,model);
case HESSIAN_FREE:
return new StochasticHessianFree(conf,stepFunction,listeners,model);
case CONJUGATE_GRADIENT:
return new ConjugateGradient(conf,stepFunction,listeners,model);
case STOCHASTIC_GRADIENT_DESCENT:
return new StochasticGradientDescent(conf,stepFunction,listeners,model);
default :
throw new IllegalStateException("No optimizer found");
}
}
