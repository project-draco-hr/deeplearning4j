{
  VocabCache cache=new InMemoryLookupCache.Builder().vectorLength(100).build();
  cache.addToken(new VocabWord(1,"hello"));
  cache.addToken(new VocabWord(2,"hello2"));
  cache.addWordToIndex(0,"hello");
  cache.addWordToIndex(1,"hello2");
  cache.putVocabWord("hello");
  cache.putVocabWord("hello2");
  InvertedIndex index=new LuceneInvertedIndex(cache,false);
  index.cleanup();
  index.addWordsToDoc(0,Arrays.asList(cache.wordFor("hello"),cache.wordFor("hello2")));
  index.addWordsToDoc(1,Arrays.asList(cache.wordFor("hello"),cache.wordFor("hello2")));
  index.finish();
  assertEquals(2,index.numDocuments());
  assertEquals(2,index.document(0).size());
  assertEquals(2,index.document(1).size());
  assertEquals(2,index.documents(cache.wordFor("hello")).length);
  assertEquals(2,index.documents(cache.wordFor("hello2")).length);
}
