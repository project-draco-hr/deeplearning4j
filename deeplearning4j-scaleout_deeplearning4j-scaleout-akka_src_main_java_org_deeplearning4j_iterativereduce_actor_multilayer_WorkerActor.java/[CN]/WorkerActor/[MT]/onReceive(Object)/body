{
  if (message instanceof DistributedPubSubMediator.SubscribeAck) {
    DistributedPubSubMediator.SubscribeAck ack=(DistributedPubSubMediator.SubscribeAck)message;
    log.info("Subscribed to " + ack.toString());
  }
 else   if (message instanceof List) {
    List<Pair<DoubleMatrix,DoubleMatrix>> input=(List<Pair<DoubleMatrix,DoubleMatrix>>)message;
    updateTraining(input);
  }
 else   if (message instanceof BaseMultiLayerNetwork) {
    setNetwork((BaseMultiLayerNetwork)message);
    log.info("Set network");
  }
 else   if (message instanceof Ack) {
    log.info("Ack from master on worker " + id);
  }
 else   if (message instanceof Updateable) {
    UpdateableImpl m=(UpdateableImpl)message;
    setWorkerUpdateable(m);
    log.info("Updated worker network");
    if (m.get() == null) {
      log.warn("Unable to initialize network; network was null");
      throw new IllegalArgumentException("Network was null");
    }
    setNetwork(m.get().clone());
  }
 else   unhandled(message);
}
