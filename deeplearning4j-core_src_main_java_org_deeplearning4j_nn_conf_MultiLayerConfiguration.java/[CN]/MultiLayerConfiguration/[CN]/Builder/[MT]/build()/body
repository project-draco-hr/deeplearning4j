{
  MultiLayerConfiguration conf=new MultiLayerConfiguration();
  conf.confs=this.confs;
  if (hiddenLayerSizes == null)   throw new IllegalStateException("Please specify hidden layer sizes");
  conf.hiddenLayerSizes=this.hiddenLayerSizes;
  conf.useDropConnect=useDropConnect;
  conf.pretrain=pretrain;
  conf.useRBMPropUpAsActivations=useRBMPropUpAsActivations;
  conf.dampingFactor=dampingFactor;
  conf.processors=preProcessors;
  conf.backward=backward;
  conf.inputPreProcessors=inputPreProcessor;
  DefaultRandom r=(DefaultRandom)conf.getConf(0).getRng();
  Nd4j.getRandom().setSeed(r.getSeed());
  return conf;
}
