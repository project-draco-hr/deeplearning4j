{
  if (opt == null)   opt=new ConjugateGradient(this);
  boolean done=false;
  network.train(x,lr,extraParams);
  while (!done) {
    try {
      done=opt.optimize();
    }
 catch (    InvalidOptimizableException e) {
      done=true;
      log.info("Error on step; finishing");
    }
catch (    OptimizationException e2) {
      done=true;
      log.info("Error on step; finishing");
    }
  }
}
