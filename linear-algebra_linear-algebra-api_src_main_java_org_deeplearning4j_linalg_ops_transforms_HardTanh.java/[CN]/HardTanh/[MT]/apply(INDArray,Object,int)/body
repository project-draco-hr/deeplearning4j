{
  if (value instanceof IComplexNumber) {
    IComplexNumber element=(IComplexNumber)value;
    IComplexNumber ret=ComplexUtil.tanh(element);
    if (ret.realComponent().floatValue() < -1)     ret.set(-1,ret.imaginaryComponent().floatValue());
    if (ret.realComponent().floatValue() > 1)     ret.set(1,ret.imaginaryComponent().floatValue());
    return NDArrays.scalar(ret);
  }
 else {
    float d=(float)value;
    float ret=(float)Math.tanh(d);
    if (ret < -1)     return -1;
 else     if (ret > 1)     return 1;
 else     return ret;
  }
}
