{
  server=new TestingServer(2182);
  StateTracker tracker=createTracker();
  String id=UUID.randomUUID().toString();
  WorkerState state=new WorkerState(id,null);
  state.setAvailable(true);
  tracker.addWorker(state);
  Map<String,WorkerState> workers=tracker.currentWorkers();
  assertEquals(1,workers.size());
  WorkerState state2=tracker.nextAvailableWorker();
  assertEquals(state,state2);
  tracker.shutdown();
  server.stop();
}
