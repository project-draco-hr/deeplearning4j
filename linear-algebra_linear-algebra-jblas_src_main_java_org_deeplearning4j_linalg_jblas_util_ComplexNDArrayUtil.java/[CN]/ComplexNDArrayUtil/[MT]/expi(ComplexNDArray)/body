{
  ComplexNDArray flattened=toExp.ravel();
  for (int i=0; i < flattened.length; i++) {
    ComplexDouble d=(ComplexDouble)ComplexUtil.exp(flattened.get(i));
    flattened.put(i,d);
  }
  return flattened.reshape(toExp.shape());
}
