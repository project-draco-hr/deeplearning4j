{
  DataSetIterator mnist=new MnistDataSetIterator(100,100);
  LayerFactory layerFactory=LayerFactories.getFactory(ConvolutionLayer.class);
  NeuralNetConfiguration conf=new NeuralNetConfiguration.Builder().featureMapSize(20,20).activationFunction("relu").constrainGradientToUnitNorm(true).convolutionType(ConvolutionDownSampleLayer.ConvolutionType.MAX).filterSize(6,1,9,9).layerFactory(LayerFactories.getFactory(ConvolutionLayer.class)).nIn(784).nOut(1).build();
  Layer convolutionLayer=layerFactory.create(conf);
  DataSet next=mnist.next();
  INDArray input=next.getFeatureMatrix().reshape(next.numExamples(),1,28,28);
  INDArray conv=convolutionLayer.activate(input);
  assertEquals(input.slices(),conv.slices());
}
