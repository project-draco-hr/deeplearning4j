{
  if (vertexInputs.length != 1)   throw new InvalidInputTypeException("Invalid input: Preprocessor vertex expects " + "exactly one input");
  if (outputType != null)   return outputType;
switch (vertexInputs[0].getType()) {
case FF:
    if (preProcessor instanceof FeedForwardToCnnPreProcessor) {
      FeedForwardToCnnPreProcessor ffcnn=(FeedForwardToCnnPreProcessor)preProcessor;
      return InputType.convolutional(ffcnn.getNumChannels(),ffcnn.getInputWidth(),ffcnn.getInputHeight());
    }
 else     if (preProcessor instanceof FeedForwardToRnnPreProcessor) {
      return InputType.recurrent();
    }
 else {
      return InputType.feedForward();
    }
case RNN:
  if (preProcessor instanceof RnnToCnnPreProcessor) {
    RnnToCnnPreProcessor ffcnn=(RnnToCnnPreProcessor)preProcessor;
    return InputType.convolutional(ffcnn.getNumChannels(),ffcnn.getInputWidth(),ffcnn.getInputHeight());
  }
 else   if (preProcessor instanceof RnnToFeedForwardPreProcessor) {
    return InputType.feedForward();
  }
 else {
    return InputType.recurrent();
  }
case CNN:
if (preProcessor instanceof CnnToFeedForwardPreProcessor) {
  return InputType.feedForward();
}
 else if (preProcessor instanceof CnnToRnnPreProcessor) {
  return InputType.recurrent();
}
 else {
  return vertexInputs[0];
}
default :
throw new RuntimeException("Unknown InputType: " + vertexInputs[0]);
}
}
