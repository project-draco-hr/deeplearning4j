{
  Layer ret=getInstance(conf);
  ret.setListeners(iterationListeners);
  ret.setIndex(index);
  if (conf.getLayer().isUseParams())   ret.setParamTable(conf.getLayer().getParamTable());
 else {
    Map<String,INDArray> params=getParams(conf);
    ret.setParamTable(params);
  }
  ret.setConf(conf);
  ret.setInputMiniBatchSize(conf.getBatchSize());
  return (E)ret;
}
