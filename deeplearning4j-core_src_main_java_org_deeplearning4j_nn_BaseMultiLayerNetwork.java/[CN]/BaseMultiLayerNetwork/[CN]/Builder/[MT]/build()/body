{
  try {
    ret=(E)clazz.newInstance();
    ret.setNormalizeByInputRows(normalizeByInputRows);
    ret.setInput(this.input);
    ret.setnOuts(this.nOuts);
    ret.setnIns(this.nIns);
    ret.setLabels(this.labels);
    ret.setHiddenLayerSizes(this.hiddenLayerSizes);
    ret.setnLayers(this.nLayers);
    ret.setRng(this.rng);
    ret.setShouldBackProp(this.backProp);
    ret.setSigmoidLayers(new HiddenLayer[ret.getnLayers()]);
    ret.setUseHiddenActivationsForwardProp(useHiddenActivationsForwardProp);
    ret.setToDecode(decode);
    ret.setInput(this.input);
    ret.setMomentum(momentum);
    ret.setLabels(labels);
    ret.setFanIn(fanIn);
    ret.setSparsity(sparsity);
    ret.setRenderWeightsEveryNEpochs(renderWeithsEveryNEpochs);
    ret.setL2(l2);
    ret.setForceNumEpochs(shouldForceEpochs);
    ret.setUseRegularization(useRegularization);
    ret.setUseAdaGrad(useAdaGrad);
    if (activation != null)     ret.setActivation(activation);
    if (dist != null)     ret.setDist(dist);
    ret.getWeightTransforms().putAll(weightTransforms);
    ret.getVisibleBiasTransforms().putAll(visibleBiasTransforms);
    ret.getHiddenBiasTransforms().putAll(hiddenBiasTransforms);
    ret.gradientListeners.putAll(gradientListeners);
    ret.multiLayerGradientListeners.addAll(multiLayerGradientListeners);
    if (hiddenLayerSizes == null)     throw new IllegalStateException("Unable to build network, no hidden layer sizes defined");
    ret.init();
    return ret;
  }
 catch (  InstantiationException|IllegalAccessException e) {
    throw new RuntimeException(e);
  }
}
