{
  try {
    E ret;
    Constructor<?> c=Dl4jReflection.getEmptyConstructor(clazz);
    c.setAccessible(true);
    ret=(E)c.newInstance();
    ret.setDefaultConfiguration(conf);
    ret.useGaussNewtonVectorProductBackProp=useGaussNewtonVectorProductBackProp;
    ret.setUseDropConnect(useDropConnect);
    ret.setInput(this.input);
    ret.setLabels(this.labels);
    ret.setHiddenLayerSizes(this.hiddenLayerSizes);
    ret.setnLayers(this.nLayers);
    ret.setLayerWiseConfigurations(layerWiseConfiguration);
    ret.neuralNets=new NeuralNetwork[nLayers];
    ret.setInput(this.input);
    ret.setLabels(labels);
    ret.setForceNumEpochs(shouldForceEpochs);
    ret.getWeightTransforms().putAll(weightTransforms);
    ret.getVisibleBiasTransforms().putAll(visibleBiasTransforms);
    ret.getHiddenBiasTransforms().putAll(hiddenBiasTransforms);
    ret.layerWiseConfigurations=layerWiseConfiguration;
    ret.pretrain=pretrain;
    if (ret.defaultConfiguration == null)     ret.defaultConfiguration=layerWiseConfiguration.get(0);
    if (hiddenLayerSizes == null)     throw new IllegalStateException("Unable to build network, no hidden layer sizes defined");
    return ret;
  }
 catch (  Exception e) {
    throw new RuntimeException(e);
  }
}
