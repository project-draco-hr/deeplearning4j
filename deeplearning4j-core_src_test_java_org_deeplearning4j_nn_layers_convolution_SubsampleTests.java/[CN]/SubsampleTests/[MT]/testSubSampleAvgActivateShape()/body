{
  DataSetIterator mnistIter=new MnistDataSetIterator(nExamples,nExamples);
  DataSet mnist=mnistIter.next();
  Layer model=getSubsamplingLayer(SubsamplingLayer.PoolingType.AVG);
  INDArray input=mnist.getFeatureMatrix().reshape(mnist.numExamples(),1,28,28);
  INDArray output=model.activate(input);
  assertTrue(Arrays.equals(new int[]{nExamples,1,14,14},output.shape()));
  assertEquals(nExamples,output.shape()[0],1e-4);
}
