{
  RecordReader csv=new CSVRecordReader();
  csv.initialize(new FileSplit(new ClassPathResource("iris.txt").getTempFileFromArchive()));
  int batchSize=10;
  int labelIdx=4;
  int numClasses=3;
  RecordReaderDataSetIterator rrdsi=new RecordReaderDataSetIterator(csv,batchSize,labelIdx,numClasses);
  rrdsi.setCollectMetaData(true);
  while (rrdsi.hasNext()) {
    DataSet ds=rrdsi.next();
    List<RecordMetaData> meta=ds.getExampleMetaData(RecordMetaData.class);
    for (    RecordMetaData m : meta) {
      System.out.println(m.getLocation() + "\t" + ((RecordReaderMeta)csv).loadFromMeta(m).getRecord());
    }
    System.out.println();
  }
}
