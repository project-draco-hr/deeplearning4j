{
  CounterMap<Integer,Integer> transitionProbabilities=new CounterMap<>();
  for (int i=1; i < d.getSecond().rows; i++) {
    transitionProbabilities.incrementCount(SimpleBlas.iamax(d.getSecond().getRow(i - 1)),SimpleBlas.iamax(d.getSecond().getRow(i)),1.0);
  }
  DoubleMatrix transitionProbabilities2=CounterUtil.convert(transitionProbabilities);
  Index labelIndex=new Index();
  labelIndex.add("NONE");
  for (int i=0; i < labels.size(); i++)   labelIndex.add(labels.get(i));
  viterbi=new Viterbi(labelIndex,ViterbiUtil.featureIndexFromLabelIndex(labelIndex),transitionProbabilities2);
}
