{
  DoubleMatrix ret=new DoubleMatrix(vals.rows,vals.columns);
  for (int i=0; i < vals.length; i++) {
    double logVal=Math.log(vals.get(i));
    if (!Double.isNaN(logVal) && !Double.isInfinite(logVal))     ret.put(i,logVal);
 else     ret.put(i,1e-6);
  }
  return ret;
}
