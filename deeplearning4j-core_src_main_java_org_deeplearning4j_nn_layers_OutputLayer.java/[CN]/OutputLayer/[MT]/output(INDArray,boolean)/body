{
  if (x == null)   throw new IllegalArgumentException("No null input allowed");
  INDArray preOutput=preOutput(x);
  if (conf.getActivationFunction().equals("softmax")) {
    SoftMax softMax=new SoftMax(preOutput);
    softMax.exec(1);
    return softMax.z();
  }
  if (!test)   applyDropOutIfNecessary(input(),!test);
  return super.activate();
}
