{
  MultiLayerConfiguration multiLayerConfiguration=new NeuralNetConfiguration.Builder().optimizationAlgo(OptimizationAlgorithm.CONJUGATE_GRADIENT).seed(123).iterations(5).maxNumLineSearchIterations(10).activationFunction("relu").k(1).weightInit(WeightInit.XAVIER).constrainGradientToUnitNorm(true).hiddenUnit(RBM.HiddenUnit.RECTIFIED).regularization(true).visibleUnit(RBM.VisibleUnit.GAUSSIAN).list(4).layer(0,new RBM.Builder().nIn(784).nOut(1000).build()).layer(1,new RBM.Builder().nIn(1000).nOut(500).build()).layer(2,new RBM.Builder().nIn(500).nOut(250).build()).layer(3,new OutputLayer.Builder(LossFunctions.LossFunction.MCXENT).activation("softmax").nIn(250).nOut(numOut).build()).pretrain(false).backprop(true).build();
  MultiLayerNetwork network=new MultiLayerNetwork(multiLayerConfiguration);
  network.init();
}
