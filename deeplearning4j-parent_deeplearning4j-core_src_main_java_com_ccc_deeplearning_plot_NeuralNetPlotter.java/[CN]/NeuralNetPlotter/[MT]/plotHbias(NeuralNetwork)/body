{
  try {
    if (network.getInput() == null)     throw new IllegalStateException("Unable to plot; missing input");
    ;
    String filePath=System.getProperty("java.io.tmpdir") + File.separator + UUID.randomUUID().toString();
    File write=new File(filePath);
    BufferedOutputStream bos=new BufferedOutputStream(new FileOutputStream(write,true));
    DoubleMatrix hbiasMean=network.getInput().mmul(network.getW()).addRowVector(network.gethBias());
    for (int i=0; i < hbiasMean.rows; i++) {
      DoubleMatrix row=hbiasMean.getRow(i);
      StringBuffer sb=new StringBuffer();
      for (int j=0; j < row.length; j++) {
        sb.append(row.get(j));
        if (j < row.length - 1)         sb.append(",");
      }
      sb.append("\n");
      String line=sb.toString();
      bos.write(line.getBytes());
      bos.flush();
    }
    bos.close();
    Process is=Runtime.getRuntime().exec("python /tmp/plot.py hbias " + filePath);
    Thread.sleep(10000);
    is.destroy();
    log.info("Rendering hbias " + filePath);
    log.error(IOUtils.readLines(is.getErrorStream()).toString());
    write.deleteOnExit();
  }
 catch (  Exception e) {
    log.warn("Image closed");
  }
}
